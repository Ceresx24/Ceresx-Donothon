<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Ceres Donothon Dashboard</title>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
<style>
  body{background:#0f0f1e;color:#fff;font-family:Arial;padding:20px}
  input,button{padding:12px;margin:8px;font-size:18px;border-radius:8px}
  button{background:#9146FF;color:white;border:none;cursor:pointer}
  .section{background:#16213e;padding:25px;margin:20px 0;border-radius:15px}
  .goal-item{background:#223;padding:15px;margin:10px 0;border-radius:10px;border-left:5px solid #9146FF}
  .goal-item input{width:120px;margin-right:10px}
  .current-goal{font-size:28px;margin:15px 0;padding:15px;background:#112;border-radius:10px}
</style></head><body>

<div class="section"><h1>CERES DONOTHON 2025</h1>
  <div id="login">Password: <input type="password" id="pw"><button onclick="login()">Enter</button></div>
</div>

<div id="main" style="display:none;">
  <!-- everything else stays exactly the same -->
  <div class="section" style="font-size:60px;text-align:center" id="liveTimer">00:00:00</div>
  <div class="section" style="font-size:32px;text-align:center">
    Raised: $<span id="liveRaised">0.00</span> | Subs: <span id="liveSubs">0</span>
  </div>

  <div class="section">
    <button onclick="ref.update({startTime:Date.now(),paused:false})" style="font-size:30px;padding:20px;background:green">START</button>
    <button onclick="togglePause()" id="pauseBtn">PAUSE</button>
    <button onclick="if(confirm('RESET EVERYTHING?'))ref.set({startTime:null,bonusSeconds:0,totalEarned:0,subsCount:0,highestSub:'None',config:{milestones:{}}})" style="background:red">RESET ALL</button>
  </div>

  <div class="section">
    <h2>Manual Controls</h2>
    Minutes: <input id="min" type="number"><button onclick="addTime()">Add</button><br>
    Money $: <input id="money" type="number"><button onclick="addMoney()">Add $ + Time</button>
  </div>

  <div class="section">
    <h2>Currently Visible on Stream (3 goals)</h2>
    <div id="currentGoals"></div>
  </div>

  <div class="section">
    <h2>All Goals (edit / delete)</h2>
    <div id="goalList"></div>
    <div style="margin-top:20px">
      Amount: <input id="newAmt" type="number" placeholder="5000">
      Description: <input id="newDesc" placeholder="Sing Baby Shark" style="width:350px">
      <button onclick="addMilestone()">Add Goal</button>
    </div>
  </div>

  <div class="section">
    <h2>Colors</h2>
    Accent <input type="color" id="ac" value="#9146FF">
    Background <input type="color" id="bg" value="#000000"> Opacity <input type="range" id="op" min="0" max="100" value="80">
    Text <input type="color" id="txt" value="#ffffff">
    Gradient 1 <input type="color" id="g1" value="#9146FF">
    Gradient 2 <input type="color" id="g2" value="#00ffcc">
    Checkmark <input type="color" id="chk" value="#00ff99">
    <button onclick="saveColors()">SAVE COLORS</button>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBFQFPo85fIpaHWl3Kr0PZ6WIm5B6WVusA",
  authDomain: "ceres-donothon-timer.firebaseapp.com",
  databaseURL: "https://ceres-donothon-timer-default-rtdb.firebaseio.com",
  projectId: "ceres-donothon-timer",
  storageBucket: "ceres-donothon-timer.firebasestorage.app",
  messagingSenderId: "62539165670",
  appId: "1:62539165670:web:170c8110449deba628b027",
  measurementId: "G-9F66NMVB2J"
};
const PATH = 'donothon-ultimate-2025-x7k9p2m4q8z3v6n1';
const PASSWORDS = ['Rin125', '125', 'Rinmod125'];

firebase.initializeApp(firebaseConfig);
const ref = firebase.database().ref(PATH);

// ←←← THIS IS THE ONLY CHANGE ←←←
function login() {
  const entered = document.getElementById('pw').value.trim();
  if (PASSWORDS.includes(entered)) {
    document.getElementById('main').style.display = 'block';
    document.getElementById('login').style.display = 'none';
    startEverything();  // ← now starts everything immediately
  } else {
    alert('Wrong password');
  }
}

// Start everything once logged in
function startEverything() {
  updateLive();
  setInterval(updateLive, 1000);
  ref.child('theme').on('value', s => { const t = s.val() || {}; 
    ['ac','bg','txt','g1','g2','chk'].forEach(id => t[id] && document.getElementById(id).value = t[id]);
    t.bgOpacity && (document.getElementById('op').value = t.bgOpacity);
  });
  ref.child('config/milestones').on('value', renderAllGoals);
  ref.on('value', renderCurrentGoals);
}

// All the other functions stay exactly the same
function updateLive(){/* same as before */}
function renderCurrentGoals(s){/* same */}
function renderAllGoals(s){/* same */}
function addTime(){/* same */}
function addMoney(){/* same */}
function addMilestone(){/* same */}
function saveColors(){/* same */}
function togglePause(){/* same */}
</script>
</body></html>
