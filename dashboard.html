<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><title>Ceres Donothon — FINAL PERFECTION</title><meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@600&display=swap" rel="stylesheet">
<style>
:root{--bg:#0d0b1c;--card:#14132b;--accent:#a855f7;--accent2:#c17aff;--text:#e2e8f0;--muted:#94a3b8;--success:#00ffaa;--danger:#ff3366;--border:#2d2a57}
*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;align-items:center;justify-content:center;background-image:radial-gradient(circle at top right,#1a1650 0%,transparent 50%);transition:background .5s}
#loginScreen{background:linear-gradient(135deg,#14132b,#0f0f22);width:420px;padding:50px 40px;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.6);text-align:center;border:1px solid var(--border)}
#loginScreen h1{font-size:36px;margin-bottom:10px;background:linear-gradient(90deg,#a855f7,#00e5ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
input,button{width:100%;padding:14px 16px;border-radius:12px;border:none;font-size:16px;margin:8px 0;background:#1e1c38;color:var(--text);transition:.2s}
button{background:var(--accent);color:white;font-weight:600;cursor:pointer}
button:hover{background:var(--accent2);transform:translateY(-2px)}
button.success{background:#00c853} button.danger{background:var(--danger)} button.quick{background:#333}
.live-preview{background:linear-gradient(135deg,#14132b,#0f0f22);padding:32px;border-radius:20px;text-align:center;border:1px solid var(--border);margin-bottom:30px}
#liveTimer{font-family:'JetBrains Mono',monospace;font-size:92px;background:linear-gradient(90deg,#00ffaa,#00e5ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));gap:24px}
.card{background:var(--card);border-radius:16px;padding:28px;border:1px solid var(--border);box-shadow:0 8px 32px rgba(0,0,0,.4)}
.card h2{font-size:24px;color:var(--accent);margin-bottom:20px}
.slider-grid{display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;margin:10px 0}
.value{min-width:60px;text-align:right;padding:6px 10px;background:#1e1c38;border-radius:8px;font-weight:600}
.quick-add{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:10px}
@media(max-width:768px){.grid{grid-template-columns:1fr}}
</style></head><body>

<div id="loginScreen">
  <h1>CERES DONOTHON</h1><p>Press Enter to login</p>
  <input type="password" id="pw" placeholder="Password" autofocus>
  <button onclick="login()">UNLOCK</button>
</div>

<div id="main" style="display:none;max-width:1400px;width:100%;padding:20px">
  <div style="text-align:center;margin-bottom:20px">
    <h1>Ceres Donothon — FINAL PERFECTION</h1>
    <button onclick="document.body.classList.toggle('light')" style="position:absolute;top:20px;right:20px;padding:10px 16px">Light/Dark</button>
  </div>

  <div class="live-preview">
    <h2 style="color:#fff">Donothon by <span id="liveName">Ceres</span></h2>
    <div id="liveTimer">03:00:00</div>
    <div style="font-size:28px">Raised: $<span id="liveRaised">0.00</span> • Subs: <span id="liveSubs">0</span> • Bits: <span id="liveBits">0</span></div>
    <div class="status" id="status">STOPPED</div>
  </div>

  <div class="grid">
    <div class="card"><h2>Timer</h2>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <input type="number" id="startHours" value="3" min="0"><input type="number" id="startMinutes" value="0" min="0" max="59">
      </div>
      <button class="success" style="padding:18px;font-size:20px" onclick="startTimer()">START TIMER</button>
      <button id="pauseBtn" style="padding:16px;font-size:18px" onclick="togglePause()">PAUSE TIMER</button>
      <div class="quick-add">
        <button class="quick" onclick="addTimeOnly(5)">+5 min</button>
        <button class="quick" onclick="addTimeOnly(10)">+10 min</button>
        <button class="quick" onclick="addTimeOnly(30)">+30 min</button>
      </div>
      <button class="danger" style="margin-top:10px" onclick="if(confirm('NUKE EVERYTHING?'))resetAll()">RESET ALL</button>
      <button style="margin-top:10px;background:#ff9800" onclick="testGoal()">TEST GOAL HIT</button>
    </div>

    <div class="card"><h2>Event Rewards (seconds)</h2>
      <div class="slider-grid"><label>Tier 1</label><input type="range" min="0" max="600" value="60" id="t1" oninput="autoSaveReward('t1',this.value);v('t1',this.value)"><span class="value" id="t1v">60</span></div>
      <div class="slider-grid"><label>Tier 2</label><input type="range" min="0" max="600" value="120" id="t2" oninput="autoSaveReward('t2',this.value);v('t2',this.value)"><span class="value" id="t2v">120</span></div>
      <div class="slider-grid"><label>Tier 3</label><input type="range" min="0" max="600" value="300" id="t3" oninput="autoSaveReward('t3',this.value);v('t3',this.value)"><span class="value" id="t3v">300</span></div>
      <div class="slider-grid"><label>Gift Sub</label><input type="range" min="0" max="600" value="60" id="gift" oninput="autoSaveReward('gift',this.value);v('gift',this.value)"><span class="value" id="giftv">60</span></div>
      <div class="slider-grid"><label>Donation/$1</label><input type="range" min="0" max="300" value="60" id="don" oninput="autoSaveReward('don',this.value);v('don',this.value)"><span class="value" id="donv">60</span></div>
      <div class="slider-grid"><label>Bits/100</label><input type="range" min="0" max="300" value="30" id="bits" oninput="autoSaveReward('bits',this.value);v('bits',this.value)"><span class="value" id="bitsv">30</span></div>
    </div>

    <div class="card"><h2>Manual Add</h2>
      <input type="number" step="0.01" id="addMoney" placeholder="Donation $">
      <input type="number" id="addMinutes" placeholder="Extra minutes">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <button onclick="addMoneyAndTime()">Add Both</button>
        <button onclick="addMoneyOnly()">Money Only</button>
      </div>
      <button style="margin-top:8px" onclick="addTimeOnly()">Time Only</button>
    </div>

    <div class="card"><h2>Appearance</h2>
      <input id="streamerName" placeholder="Your name">
      <button onclick="updateName()">Update Name</button>
      <label>Goal Scale: <strong><span id="scaleValue">100</span>%</strong></label>
      <input type="range" min="50" max="200" value="100" id="goalScale" oninput="autoSaveScale(this.value);document.getElementById('scaleValue').textContent=this.value">
      <div style="margin-top:15px">
        <label>Accent <input type="color" id="ac" value="#a855f7" onchange="save('accent',this.value)"></label>
        <label>Text <input type="color" id="txt" value="#ffffff" onchange="save('text',this.value)"></label>
        <label>Grad → <input type="color" id="g1" value="#a855f7" onchange="save('grad1',this.value)"></label>
        <label><input type="color" id="g2" value="#00e5ff" onchange="save('grad2',this.value)"></label>
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:30px"><h2>Milestones</h2><div id="goalList"></div>
    <div style="display:flex;gap:10px;margin-top:15px">
      <input placeholder="$ Amount" id="newAmt" style="width:140px">
      <input placeholder="Description" id="newDesc" style="flex:1">
      <button onclick="addGoal()">+ Add</button>
    </div>
  </div>
</div>

<script>
const PATH='donothon-ultimate-2025-x7k9p2m4q8z3v6n1';
const PASSWORDS=['Rin125','125','Rinmod125'];
firebase.initializeApp({apiKey:"AIzaSyBFQFPo85fIpaHWl3Kr0PZ6WIm5B6WVusA",authDomain:"ceres-donothon-timer.firebaseapp.com",databaseURL:"https://ceres-donothon-timer-default-rtdb.firebaseio.com",projectId:"ceres-donothon-timer"});
const ref=firebase.database().ref(PATH);

// Login + shortcuts
document.getElementById('pw').addEventListener('keypress',e=>e.key==='Enter'&&login());
document.addEventListener('keydown',e=>{if(e.key===' '&&document.getElementById('main').style.display==='block'){e.preventDefault();togglePause();}});
function login(){if(PASSWORDS.includes(document.getElementById('pw').value.trim())){document.getElementById('loginScreen').style.display='none';document.getElementById('main').style.display='block';init();}else alert('Wrong');}

// Auto-save helpers
function autoSaveReward(key,val){ref.child('config/eventRewards/'+key).set(+val);}
function autoSaveScale(val){ref.child('theme/goalScale').set(val/100);}
function save(k,v){ref.child('theme/'+k).set(v);}

// Test goal
function testGoal(){ref.child('totalEarned').transaction(v=>(v||0)+10000);}

// Rest of your perfect code (timer, pause, etc.) stays exactly as in the previous final version
// → Paste the working togglePause(), startTimer(), updateLive(), etc. from the last message here

init();
</script>
</body></html>
