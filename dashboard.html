<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Ceres Donothon Dashboard</title>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
<style>
  body{background:#0f0f1e;color:#fff;font-family:Arial;padding:20px;margin:0}
  input,button,select{padding:12px;margin:8px;font-size:18px;border-radius:8px;border:none}
  button{background:#9146FF;color:white;cursor:pointer}
  .section{background:#16213e;padding:25px;margin:20px 0;border-radius:15px}
  .goal-item{background:#223;padding:15px;margin:10px 0;border-radius:10px;border-left:5px solid #9146FF}
</style></head><body>

<div id="login" style="text-align:center;margin-top:100px">
  <h1>CERES DONOTHON 2025 — CONTROL PANEL</h1>
  Password: <input type="password" id="pw" autofocus> <button onclick="login()">Enter</button>
  <p id="error" style="color:#f66;display:none">Wrong password</p>
</div>

<div id="main" style="display:none">
  <div class="section" style="font-size:60px;text-align:center" id="liveTimer">00:00:00</div>
  <div class="section" style="font-size:32px;text-align:center">Raised: $<span id="liveRaised">0.00</span> | Subs: <span id="liveSubs">0</span> | Bits: <span id="liveBits">0</span></div>

  <div class="section">
    <button onclick="ref.update({startTime:null,endTime:Date.now()+24*60*60*1000,bonusSeconds:0})" style="font-size:30px;padding:20px;background:#0b0">START 24H COUNTDOWN</button>
    <button onclick="togglePause()" id="pauseBtn">PAUSE</button>
    <button onclick="if(confirm('RESET EVERYTHING?'))ref.set({endTime:null,bonusSeconds:0,totalEarned:0,subsCount:0,bitsCount:0,config:{milestones:{}}})" style="background:#c11">RESET ALL</button>
  </div>

  <div class="section"><h2>Manual Add</h2>
    Minutes: <input id="min" type="number"><button onclick="addTime()">Add</button><br>
    Money $: <input id="money" type="number"><button onclick="addMoney()">Add $ + Time</button>
  </div>

  <div class="section"><h2>Visible Goals</h2><div id="currentGoals"></div></div>
  <div class="section"><h2>All Goals</h2><div id="goalList"></div>
    <hr>Amount <input id="newAmt" type="number" placeholder="5000"> Text <input id="newDesc" placeholder="Do a backflip" style="width:350px">
    <button onclick="addMilestone()">Add Goal</button>
  </div>

  <div class="section"><h2>Colors & Layout</h2>
    Accent <input type="color" id="ac" value="#9146FF" onchange="save('accent',this.value)"><br>
    Background <input type="color" id="bg" value="#000000" onchange="save('bgColor',this.value);save('bg',`rgba(${h2d(this.value.slice(1,3))},${h2d(this.value.slice(3,5))},${h2d(this.value.slice(5,7))},${document.getElementById('op').value/100})`)"> Opacity <input type="range" id="op" min="0" max="100" value="80" onchange="save('bgOpacity',this.value);document.getElementById('bg').onchange()"><br>
    Text <input type="color" id="txt" value="#ffffff" onchange="save('text',this.value)"><br>
    Gradient <input type="color" id="g1" value="#9146FF" onchange="save('grad1',this.value)"> → <input type="color" id="g2" value="#00ffcc" onchange="save('grad2',this.value)"><br>
    Checkmark <input type="color" id="chk" value="#00ff99" onchange="save('check',this.value)"><br><br>
    <b>Presets:</b> <button onclick="setPreset('classic')">Classic</button> <button onclick="setPreset('huge')">HUGE</button> <button onclick="setPreset('compact')">Compact</button> <button onclick="setPreset('neon')">Neon</button> <button onclick="setPreset('minimal')">Minimal</button>
  </div>

  <div class="section"><h2>Font</h2>
    <select onchange="ref.child('theme/font').set(this.value)">
      <option>Impact</option><option>Orbitron</option><option>Bebas Neue</option><option>Rajdhani</option><option>Anton</option><option>Monoton</option><option>Bungee</option><option>Press Start 2P</option><option>Audiowide</option><option>Exo 2</option><option>Righteous</option><option>Wallpoet</option><option>VT323</option>
    </select>
  </div>

  <div class="section"><h2>Timer Animation</h2>
    <button onclick="ref.child('theme/animation').set('none')">None</button>
    <button onclick="ref.child('theme/animation').set('pulse')">Pulse</button>
    <button onclick="ref.child('theme/animation').set('shake')">Shake</button>
    <button onclick="ref.child('theme/animation').set('rainbow')">Rainbow</button>
    <button onclick="ref.child('theme/animation').set('glitch')">Glitch</button>
    <button onclick="ref.child('theme/animation').set('bounce')">Bounce</button>
    <button onclick="ref.child('theme/animation').set('neon')">Neon</button>
    <button onclick="ref.child('theme/animation').set('spin')">Spin</button>
    <button onclick="ref.child('theme/animation').set('float')">Float</button>
  </div>
</div>

<script>
const firebaseConfig = {apiKey:"AIzaSyBFQFPo85fIpaHWl3Kr0PZ6WIm5B6WVusA",authDomain:"ceres-donothon-timer.firebaseapp.com",databaseURL:"https://ceres-donothon-timer-default-rtdb.firebaseio.com",projectId:"ceres-donothon-timer",storageBucket:"ceres-donothon-timer.firebasestorage.app",messagingSenderId:"62539165670",appId:"1:62539165670:web:170c8110449deba628b027",measurementId:"G-9F66NMVB2J"};
const PATH = 'donothon-ultimate-2025-x7k9p2m4q8z3v6n1';
const PASSWORDS = ['Rin125','125','Rinmod125'];
firebase.initializeApp(firebaseConfig);
const ref = firebase.database().ref(PATH);

function h2d(h){return parseInt(h,16)}
function login(){const p=document.getElementById('pw').value.trim();if(PASSWORDS.includes(p)){document.getElementById('main').style.display='block';document.getElementById('login').style.display='none';start();}else{document.getElementById('error').style.display='block';}}
document.getElementById('pw').addEventListener('keypress',e=>{if(e.key==='Enter')login();});

function start(){
  setInterval(updateLive,1000);
  ref.child('theme').on('value',s=>{const t=s.val()||{};['ac','bg','txt','g1','g2','chk'].forEach(id=>t[id]&&document.getElementById(id).value=t[id]);t.bgOpacity&&document.getElementById('op').value=t.bgOpacity;});
  ref.child('config/milestones').on('value',renderGoals);
  ref.on('value',renderCurrent);
}
function updateLive(){
  ref.once('value').then(s=>{
    const d=s.val()||{};
    const left = d.endTime ? Math.max(0,Math.floor((d.endTime + (d.bonusSeconds||0)*1000 - Date.now())/1000)) : 0;
    const h=String(Math.floor(left/3600)).padStart(2,'0'),m=String(Math.floor(left%3600/60)).padStart(2,'0'),ss=String(left%60).padStart(2,'0');
    document.getElementById('liveTimer').textContent=`${h}:${m}:${ss}`;
    document.getElementById('liveRaised').textContent=(d.totalEarned||0).toFixed(2);
    document.getElementById('liveSubs').textContent=d.subsCount||0;
    document.getElementById('liveBits').textContent=d.bitsCount||0;
  });
}
function renderCurrent(s){/* same as previous messages */}
function renderGoals(s){/* same as previous messages */}
function addTime(){const m=+document.getElementById('min').value||0;if(m)ref.child('bonusSeconds').transaction(v=>(v||0)+m*60);}
function addMoney(){const a=+document.getElementById('money').value||0;if(a)ref.transaction(d=>{d.totalEarned+=a;d.bonusSeconds+=(d.bonusSeconds||0)+a*60;return d;});}
function addMilestone(){const a=+document.getElementById('newAmt').value;const desc=document.getElementById('newDesc').value.trim();if(a&&desc){ref.child('config/milestones').push({amount:a,description:desc});document.getElementById('newAmt').value='';document.getElementById('newDesc').value='';}}
function save(k,v){ref.child('theme').child(k).set(v);}
function setPreset(p){const presets={classic:{'timer-size':'140px','stats-size':'60px','goal-text':'48px','goal-height':'70px','padding':'40px','spacing':'30px','radius':'30px','shadow':'60px'},huge:{'timer-size':'240px','stats-size':'80px','goal-text':'60px','goal-height':'100px','padding':'60px','spacing':'50px'},compact:{'timer-size':'100px','stats-size':'40px','goal-text':'36px','goal-height':'50px','padding':'20px','spacing':'15px'},neon:{'border':'10px','shadow':'100px','radius':'40px'},minimal:{'bg':'rgba(0,0,0,0.5)','border':'2px','padding':'20px','spacing':'15px','radius':'10px'}};ref.child('theme/layout').set(presets[p]||{});}
function togglePause(){/* your pause code */}
</script>
</body></html>
