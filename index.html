<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smooth Animated Countdown</title>
<style>
body { font-family: Arial, sans-serif; background:#111; color:#fff; }
#timer { font-size: 64px; text-align:center; margin-top: 40px; transition: color 0.3s ease; }
</style>
</head>
<body>
<div id="timer">00:00</div>


<script>
// =============================================================
// SMOOTH COUNTDOWN (Hybrid 100ms update)
// =============================================================
// This version expects you to supply endTime from Firebase.
// It then smoothly animates the countdown locally.


let endTime = null; // milliseconds
let bonus = 0; // seconds
let paused = false;
let pausedAt = null;
let smoothInterval = null;


// -------------------------------------------------------------
// Format seconds â†’ mm:ss
// -------------------------------------------------------------
function fmt(t) {
const m = Math.floor(t / 60);
const s = t % 60;
return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
}


// -------------------------------------------------------------
// Start smooth countdown animation
// -------------------------------------------------------------
function startSmoothTimer() {
if (smoothInterval) clearInterval(smoothInterval);


smoothInterval = setInterval(() => {
if (!endTime) return;
if (paused && pausedAt) {
const left = Math.max(0, Math.floor((pausedAt + bonus * 1000 - Date.now()) / 1000));
document.getElementById('timer').textContent = fmt(left);
return;
}


const left = Math.max(0, Math.floor(((endTime) + bonus * 1000 - Date.now()) / 1000));
document.getElementById('timer').textContent = fmt(left);
}, 100); // 100ms hybrid update
}


// -------------------------------------------------------------
// Example simulation (remove when wiring to Firebase)
// -------------------------------------------------------------
(function demo() {
endTime = Date.now() + 300000; // 5 minutes from now
startSmoothTimer();
})();


</script>
</body>
</html>
