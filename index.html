<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Ceres Donothon — Overlay</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@600;700&family=Orbitron:wght@900&display=swap" rel="stylesheet">
<style>
html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:62.5%}
:root{--bg:rgba(8,8,28,0.96);--accent:#a855f7;--text:#fff;--timer:#fff;--timer-bonus:#00ffaa;--timer-paused:#ff5555;--grad1:#a855f7;--grad2:#00e5ff;--goal-complete:#00ffaa;--scale:1;--goal-hit:#00ffaa;--timer-hit:#00ffaa;}
.overlay{background:var(--bg);padding:5rem 6rem;border-radius:3.5rem;border:0.5rem solid var(--accent);box-shadow:0 0 8rem var(--accent),inset 0 0 5rem #a855f740;backdrop-filter:blur(12px);text-align:center;max-width:96%;transform:scale(var(--scale))}
#timer{font:900 28rem/1 'Orbitron',sans-serif;color:var(--timer);text-shadow:0 0 2rem #000;margin:0 0 2rem;letter-spacing:.05em}
#timer.paused{color:var(--timer-paused);text-shadow:0 0 3rem #f008;animation:pulse 2s infinite}
#timer.bonus{color:var(--timer-bonus);text-shadow:0 0 4rem #0f08}
#timer.hit{animation:timerHit 5s forwards}
@keyframes timerHit{0%{transform:scale(1)}15%{transform:scale(1.3);text-shadow:0 0 16rem var(--timer-hit),0 0 32rem var(--timer-hit)}100%{transform:scale(1)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.75}}
.stats{font:700 7rem 'Exo 2',sans-serif;color:var(--text);margin:1.5rem 0}
.stats span{color:var(--accent)}
.goals{display:flex;flex-direction:column;gap:3rem;align-items:center}
.goal{background:#1e1e46c0;border-radius:2.5rem;padding:3rem;border:0.4rem solid #333;overflow:hidden;position:relative;width:100%;max-width:900px}
.goal.complete{border-color:var(--goal-complete);background:#004030e0;box-shadow:0 0 3rem #00ffaa60}
.goal.hit{animation:goalHit 5s forwards}
@keyframes goalHit{0%{transform:scale(1)}12%{transform:scale(1.22) rotate(5deg);box-shadow:0 0 12rem var(--goal-hit),0 0 20rem var(--goal-hit)}100%{transform:scale(1)}}
.goal-title{font:700 7.5rem 'Exo 2',sans-serif;color:var(--text);margin-bottom:1.5rem;text-align:center}
.bar-wrap{height:10rem;background:#0006;border-radius:2rem;overflow:hidden}
.bar{height:100%;width:0;background:linear-gradient(90deg,var(--grad1),var(--grad2));border-radius:2rem;transition:width 0.2s linear}
.checkmark{position:absolute;right:4rem;top:50%;transform:translateY(-50%) scale(0) rotate(-45deg);font-size:18rem;color:var(--goal-complete);opacity:0}
.goal.complete .checkmark{animation:check 1.2s .6s forwards}
@keyframes check{0%{opacity:0;transform:translateY(-50%) scale(.3) rotate(-45deg)}70%{opacity:1;transform:translateY(-50%) scale(1.3) rotate(10deg)}100%{opacity:1;transform:translateY(-50%) scale(1) rotate(0)}}
.footer{font:600 5rem 'Exo 2',sans-serif;color:#ccc;margin-top:3rem}
.hide{display:none}
#enableAudio{position:absolute;top:2rem;right:2rem;padding:1rem 2rem;font-size:2rem;border-radius:1rem;border:none;background:var(--accent);color:#fff;cursor:pointer;z-index:1000}
</style>
</head>
<body>
<div class="overlay">
  <div id="timer">03:00:00</div>
  <div class="stats">Raised: $<span id="raised">0.00</span> • Goal: $<span id="totalGoal">10,000</span></div>
  <div class="stats" id="subsLine">Subs: <span id="subs">0</span> • Bits: <span id="bits">0</span></div>
  <div class="goals" id="goals"></div>
  <div class="footer" id="footerName">Donothon Timer by Ceres</div>
</div>
<audio id="sound" preload="auto"></audio>
<button id="enableAudio">Enable Audio</button>

<script>
const PATH = 'donothon-ultimate-2025-x7k9p2m4q8z3v6n1';
firebase.initializeApp({apiKey:"AIzaSyBFQFPo85fIpaHWl3Kr0PZ6WIm5B6WVusA",authDomain:"ceres-donothon-timer.firebaseapp.com",databaseURL:"https://ceres-donothon-timer-default-rtdb.firebaseio.com",projectId:"ceres-donothon-timer"});
const db = firebase.database().ref(PATH);
const sound = document.getElementById('sound');
const enableAudioBtn = document.getElementById('enableAudio');
const celebrated = new Set(JSON.parse(localStorage.getItem('donothon_celebrated_2025')||'[]'));
let cache = {};
let audioUnlocked = false;

enableAudioBtn.addEventListener('click', ()=>{
    sound
